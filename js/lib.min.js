async function likeComment(e){const t=getCookie("authToken"),n=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${t}`});var o=JSON.stringify({query:`mutation LikeComment {\n            likeComment(commentid: "${e}") {\n                status\n                ResponseCode\n            }\n        }`,variables:{}}),r={method:"POST",headers:n,body:o,redirect:"follow"};return fetch(GraphGL,r).then(e=>e.json()).then(e=>{if(console.log(e),"error"==e.data.likeComment.status)throw new Error(e.data.likeComment.ResponseCode);return!0}).catch(e=>(Merror("Like failed",e),console.log("error",e),!1))}async function createComment(e,t,n=null){const o=getCookie("authToken"),r=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${o}`}),a="mutation CreateComment($input: CreateCommentInput!) {\n                      createComment(\n                          action: COMMENT\n                          input: $input\n                      ) {\n                          status\n                          ResponseCode\n                          affectedRows\n                      }\n                  }",s={input:{postid:e,parentid:n,content:t}};return fetch(GraphGL,{method:"POST",headers:r,body:JSON.stringify({query:a,variables:s})}).then(e=>e.json()).then(e=>(console.log("Antwort:",e),e)).catch(e=>(console.error("Fehler:",e),e))}async function fetchChildComments(e){const t=getCookie("authToken"),n=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${t}`}),o="\n  query Parentcomments($parent: ID!) {\n    parentcomments(parent: $parent) {\n        status\n        counter\n        ResponseCode\n        affectedRows {\n            commentid\n            userid\n            postid\n            parentid\n            content\n            amountlikes\n            isliked\n            createdat\n            user {\n                id\n                username\n                img\n                isfollowed\n                isfollowing\n            }\n        }\n    }\n  }",r={parent:e};return fetch(GraphGL,{method:"POST",headers:n,body:JSON.stringify({query:o,variables:r})}).then(e=>e.json()).then(e=>{if(console.log("Antwort vom Server:",e),"error"===e.data.parentcomments.status)throw new Error(e.data.parentcomments.ResponseCode);return e.data.parentcomments.affectedRows}).catch(e=>(console.error("Fehler:",e),null))}function getCookie(e){const t=`; ${document.cookie}`,n=t.split(`; ${e}=`);if(2===n.length)return n.pop().split(";").shift()}function createModal({title:e="",message:t="",buttons:n=[],type:o="info",textarea:r=!1}){function a(e){e.classList.add("modal-fade-out"),setTimeout(()=>{e.innerHTML="",e.remove()},300)}return new Promise(s=>{const i=document.createElement("div");i.classList.add("modal-container"),i.innerHTML=`\n            <div class="modal-content ${o}">\n                <span class="modal-close">&times;</span>\n                <h2 class="modal-title">${e}</h2>\n                <p class="modal-message">${t}</p>\n                ${r?`<textarea class="modal-textarea" placeholder="${"object"==typeof r&&r.placeholder?r.placeholder:""}">${"object"==typeof r&&r.value?r.value:""}</textarea>`:""}\n                <div class="modal-buttons">\n                    ${n.map((e,t)=>`<button class="modal-button" data-index="${t}">${e}</button>`).join("")}\n                </div>\n            </div>\n        `,document.body.appendChild(i),setTimeout(()=>i.classList.add("modal-show"),10);const c=i.querySelectorAll(".modal-button");c.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-index"),n=i.querySelector(".modal-textarea");s(n?{button:Number(t),value:n.value}:Number(t)),a(i)})});const l=i.querySelector(".modal-close");l.addEventListener("click",()=>{s(null),a(i)}),i.addEventListener("click",e=>{e.target===i&&(s(null),a(i))})})}function info(e,t=""){return createModal({title:e,message:t,buttons:["OK"],type:"info"})}function Merror(e,t=""){return createModal({title:e,message:t,buttons:["OK"],type:"error"})}function warnig(e,t=""){return createModal({title:e,message:t,buttons:["OK"],type:"warning"})}function formatNumber(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function sanitizeString(e){return e.replace(/[^A-Za-z0-9 \-_]/g,"")}function extractAfterComma(e){return e.includes(",")?e.split(",")[1]:e}async function loadTextFile(e,t){try{const n=await fetch(e),o=await n.text();document.getElementById(t).innerText=o}catch(e){document.getElementById(t).innerText="Fehler beim Laden der Datei."}}async function readBytes(e,t){try{const n=await fetch(e),o=n.body.getReader(),{value:r,done:a}=await o.read();if(a)return;const s=r.slice(0,t),i=new TextDecoder("utf-8").decode(s);return i}catch(e){console.error("Fehler beim Lesen der Datei:",e)}}function tempMedia(e){let t=document.getElementById("config").dataset.host;const n=t.replace("://","://media.")+e;return n}async function fetchHelloData(e=null){const t=getCookie("authToken"),n=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${t}`});let o=JSON.stringify({query:`query Hello {\n      hello {\n          currentuserid\n      }\n      profile(userid: ${e}) {\n        status\n        ResponseCode\n        affectedRows {\n            id\n            username\n            slug\n            status\n            img\n            biography\n            amountfollower\n            amountfollowed\n            amountposts\n            isfollowed\n            isfollowing\n        }\n      }\n    }`,variables:{}});var r={method:"POST",headers:n,body:o,redirect:"follow"};try{const e=await fetch(GraphGL,r),t=await e.json();return console.log(t),t}catch(e){throw console.log("error",e),e}}async function hello(){const e=getCookie("authToken"),t=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${e}`}),n=JSON.stringify({query:"query Hello {\n      hello {\n          currentuserid\n      }\n  }"}),o={method:"POST",headers:t,body:n,redirect:"follow"};try{const e=await fetch(GraphGL,o),t=await e.json();if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);if(t.errors)throw new Error(t.errors[0].message);return document.cookie=`userID=${t.data.hello.currentuserid}; path=/; secure; SameSite=Strict`,t.data.hello}catch(e){throw console.error("Error:",e.message),e}}let domain=document.getElementById("config").dataset.host;const GraphGL=domain+"/graphql";