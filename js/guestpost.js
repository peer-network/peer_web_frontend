document.addEventListener("DOMContentLoaded", function () {
  const postID = getPostIdFromURL();
  const postContainer = document.getElementById('cardClicked');
  postContainer.classList.remove('none','scrollable');
  const mainContainer = document.getElementById('nonuser-viewpost');
     
        
  const objekt2={
    "id": "5b45b0b6-22b1-4744-8104-2540902f7c04",
    "contenttype": "text",
    "title": "Vl,lgxgl,kv,",
    "media": "[{\"path\":\"\\/text\\/5b45b0b6-22b1-4744-8104-2540902f7c04.txt\",\"options\":{\"size\":\"311.00 B\"}}]",
    "cover": "",
    "mediadescription": "Ckcv FFS jdjddjjsd laps lads jacks NC jk gf yh g do oausjsjdu gf rwq xxx bcnbcjcjcjxjxjdgoogovkcjcjxsysyahxkck lckduaYzjcivogshjckvcj kckvk hxllgzgkztatkatkaktFkKgzlzglzglzglduldyldhlzglzgkzgkzlhzkhxlhsglGkzlgzddstelystoagkqglalgzlhxljclhzxlgslyslgzkgxlhsglsgkzlgshlzhldljdlgdlhslyzlgxjxhljcjvovlbputjeysufo kco",
    "createdat": "2025-07-23 07:28:05.921082",
    "amountlikes": 0,
    "amountviews": 4,
    "amountcomments": 1352,
    "amountdislikes": 0,
    "amounttrending": -2,
    "isliked": false,
    "isviewed": true,
    "isreported": false,
    "isdisliked": false,
    "issaved": false,
    "tags": [],
    "user": {
      "id": "33b86e01-259a-4f2b-8228-6dace8e1dee3",
      "username": "coconut",
      "slug": 13276,
      "img": "/profile/33b86e01-259a-4f2b-8228-6dace8e1dee3.jpeg",
      "isfollowed": false,
      "isfollowing": false
    },
    "comments": [
      {
        "commentid": "c0d70108-13e0-4737-891e-e44aab569248",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "svf",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.6693",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "44eec659-8408-41dc-a67c-34cbd21fcc14",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "wvg",
        "amountlikes": 1,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.669546",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "e571a064-6448-4515-b3dd-883374c46aa3",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "bmw",
        "amountlikes": 0,
        "amountreplies": 1,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.669789",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "a64b815d-0b9f-480b-acbc-76a5e38dac2b",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "bcr",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.986309",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "0ca4f62e-0d89-434f-aaeb-625a4341df5f",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "dey",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.992283",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "fa471b68-3b12-4ad1-a831-e289f6793aac",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "npb",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:07.992438",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "9fdf01f1-c85f-4d59-ae42-d4cc6abe8e59",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "lhj",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:08.282843",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "28816ba1-5528-4c64-bd26-0a85df20ac35",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "sfr",
        "amountlikes": 0,
        "amountreplies": 0,
        "isliked": false,
        "createdat": "2025-07-23 08:19:08.291387",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "0cbcc793-f9d2-45c1-907c-b2faddb4740a",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "ckt",
        "amountlikes": 0,
        "amountreplies": 2,
        "isliked": false,
        "createdat": "2025-07-23 08:19:08.292473",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      },
      {
        "commentid": "742d33d4-59c1-47a0-91af-03625c73d7d6",
        "userid": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
        "postid": "5b45b0b6-22b1-4744-8104-2540902f7c04",
        "parentid": "",
        "content": "gdk",
        "amountlikes": 0,
        "amountreplies": 2,
        "isliked": false,
        "createdat": "2025-07-23 08:19:08.665597",
        "user": {
          "id": "02fb3c39-86e3-4f17-bb8b-5caef056852c",
          "username": "pepe1",
          "slug": 46138,
          "img": "/profile/02fb3c39-86e3-4f17-bb8b-5caef056852c.jpg",
          "isfollowed": false,
          "isfollowing": false
        }
      }
    ]
  }
  const objekt={
    "id": "9a001d5c-240a-46f6-8b71-e234dc50c39c",
    "contenttype": "image",
    "title": "Khalid Test Multi Images Post",
    "media": "[{\"path\":\"\\/image\\/9a001d5c-240a-46f6-8b71-e234dc50c39c_0.webp\",\"options\":{\"size\":\"88.71 KB\",\"resolution\":\"590x893\"}},{\"path\":\"\\/image\\/9a001d5c-240a-46f6-8b71-e234dc50c39c_1.webp\",\"options\":{\"size\":\"268.95 KB\",\"resolution\":\"2000x1335\"}},{\"path\":\"\\/image\\/9a001d5c-240a-46f6-8b71-e234dc50c39c_2.webp\",\"options\":{\"size\":\"68.18 KB\",\"resolution\":\"457x800\"}},{\"path\":\"\\/image\\/9a001d5c-240a-46f6-8b71-e234dc50c39c_3.webp\",\"options\":{\"size\":\"92.13 KB\",\"resolution\":\"1254x836\"}}]",
    "cover": "",
    "mediadescription": "Global plastics treaty: final round of negotiations gets underway\nToday sees the start of the decisive round of negotiations on a global UN plastics treaty. In Geneva, over 170 countries are discussing how to reduce plastic pollution.\nBundeskanzler Friedrich Merz",
    "createdat": "2025-08-11 12:07:41.324366",
    "amountlikes": 1,
    "amountviews": 3,
    "amountcomments": 0,
    "amountdislikes": 0,
    "amounttrending": -23,
    "isliked": false,
    "isviewed": false,
    "isreported": false,
    "isdisliked": false,
    "issaved": false,
    "tags": [
      "cool",
      "khalidpost",
      "khalid"
    ],
    "user": {
      "id": "e46a5c7b-a604-47b7-ae8d-939ea05a1554",
      "username": "khalid786",
      "slug": 13679,
      "img": "/profile/e46a5c7b-a604-47b7-ae8d-939ea05a1554.jpeg",
      "isfollowed": false,
      "isfollowing": false
    },
    "comments": []
  }

  if (postID) {
      postdetail(objekt,null); // this funtion  define in global.js
  }else{
    const innerContainer = postContainer.querySelector('.inner-container');
    innerContainer.replaceChildren();
    innerContainer.classList.add('no-post-found');
    const noPostDiv = document.createElement("div");
    noPostDiv.classList.add('no-post');
    noPostDiv.innerHTML = `<h2 class="xxl_font_size">No Post Found</h2>
    <p class="md_font_size">The post you are looking for does not exist or has been removed.</p>`;
    innerContainer.appendChild(noPostDiv);
    

  }
  setTimeout(() => {
    mainContainer.querySelector('.site-main-nonuser').classList.remove('postloader');
  }, 3000);
        


      
  function getPostIdFromURL() {
    // Try query param first (?postid=...)
    const urlParams = new URLSearchParams(window.location.search);
    let postid = urlParams.get("postid");

    if (!postid) {
      const pathParts = window.location.pathname.split("/").filter(Boolean);
      // Find "post" in path
      const postIndex = pathParts.indexOf("post");
      if (postIndex !== -1 && pathParts[postIndex + 1]) {
        postid = pathParts[postIndex + 1];
      }
    }

    return postid;
  }      
       
});